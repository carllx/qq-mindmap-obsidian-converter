Paste Event
types: 2 types
type: text/plain
```cpp
type: text/html
<meta charset='utf-8'><html><head></head><body><div data-mind-map="[{&quot;type&quot;:5,&quot;data&quot;:{&quot;id&quot;:&quot;&quot;,&quot;title&quot;:{&quot;children&quot;:[{&quot;type&quot;:&quot;paragraph&quot;,&quot;children&quot;:[{&quot;type&quot;:&quot;text&quot;,&quot;text&quot;:&quot;```cpp&quot;}]}],&quot;type&quot;:&quot;document&quot;},&quot;collapse&quot;:false,&quot;labels&quot;:[{&quot;id&quot;:&quot;qq-mind-map-code-block-label&quot;,&quot;text&quot;:&quot;code-block&quot;,&quot;backgroundColor&quot;:&quot;rgb(172, 226, 197)&quot;,&quot;color&quot;:&quot;#000000&quot;}],&quot;notes&quot;:{&quot;content&quot;:&quot;&lt;p&gt;```cpp&lt;br&gt;// Arduino\u{36229}\u{22768}\u{27874}\u{20256}\u{24863}\u{22120}\u{20195}\u{30721}&lt;br&gt;// \u{29992}\u{20110}\u{19982}TouchDesigner\u{36890}\u{20449}&lt;/p&gt;\n&lt;p&gt;&lt;br&gt;const int trigPin = 2; &amp;nbsp; &amp;nbsp;// \u{35302}\u{21457}\u{24341}\u{33050}&lt;br&gt;const int echoPin = 3; &amp;nbsp; &amp;nbsp;// \u{22238}\u{22768}\u{24341}\u{33050}&lt;/p&gt;\n&lt;p&gt;&lt;br&gt;long duration;&lt;br&gt;int distance;&lt;br&gt;int smoothDistance;&lt;br&gt;int lastDistance = 0;&lt;/p&gt;\n&lt;p&gt;&lt;br&gt;void setup() {&lt;br&gt;&amp;nbsp; // \u{21021}\u{22987}\u{21270}\u{20018}\u{21475}\u{36890}\u{20449}&lt;br&gt;&amp;nbsp; Serial.begin(9600);&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; // \u{35774}\u{32622}\u{24341}\u{33050}\u{27169}\u{24335}&lt;br&gt;&amp;nbsp; pinMode(trigPin, OUTPUT);&lt;br&gt;&amp;nbsp; pinMode(echoPin, INPUT);&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; Serial.println(\&quot;Arduino Ultrasonic Sensor Ready\&quot;);&lt;br&gt;}&lt;/p&gt;\n&lt;p&gt;&lt;br&gt;void loop() {&lt;br&gt;&amp;nbsp; // \u{28165}\u{38500}\u{35302}\u{21457}\u{24341}\u{33050}&lt;br&gt;&amp;nbsp; digitalWrite(trigPin, LOW);&lt;br&gt;&amp;nbsp; delayMicroseconds(2);&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; // \u{21457}\u{36865}10\u{24494}\u{31186}\u{30340}\u{39640}\u{30005}\u{24179}\u{33033}\u{20914}&lt;br&gt;&amp;nbsp; digitalWrite(trigPin, HIGH);&lt;br&gt;&amp;nbsp; delayMicroseconds(10);&lt;br&gt;&amp;nbsp; digitalWrite(trigPin, LOW);&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; // \u{35835}\u{21462}\u{22238}\u{22768}\u{24341}\u{33050}\u{30340}\u{33033}\u{20914}\u{25345}\u{32493}\u{26102}\u{38388}&lt;br&gt;&amp;nbsp; duration = pulseIn(echoPin, HIGH);&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; // \u{35745}\u{31639}\u{36317}\u{31163}\u{65288}\u{21400}\u{31859}\u{65289}&lt;br&gt;&amp;nbsp; distance = duration * 0.034 / 2;&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; // \u{31616}\u{21333}\u{30340}\u{24179}\u{28369}\u{28388}\u{27874}&lt;br&gt;&amp;nbsp; smoothDistance = (distance + lastDistance) / 2;&lt;br&gt;&amp;nbsp; lastDistance = smoothDistance;&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; // \u{38480}\u{21046}\u{36317}\u{31163}\u{33539}\u{22260}\u{65288}0-200cm\u{65289}&lt;br&gt;&amp;nbsp; if (smoothDistance &amp;gt; 200) {&lt;br&gt;&amp;nbsp;smoothDistance = 200;&lt;br&gt;&amp;nbsp; }&lt;br&gt;&amp;nbsp; if (smoothDistance &amp;lt; 0) {&lt;br&gt;&amp;nbsp;smoothDistance = 0;&lt;br&gt;&amp;nbsp; }&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; // \u{21457}\u{36865}\u{25968}\u{25454}\u{21040}TouchDesigner&lt;br&gt;&amp;nbsp; // \u{26684}\u{24335}\u{65306}distance,normalized_value&lt;br&gt;&amp;nbsp; float normalizedValue = smoothDistance / 200.0; // \u{24402}\u{19968}\u{21270}\u{21040}0-1&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; Serial.print(smoothDistance);&lt;br&gt;&amp;nbsp; Serial.print(\&quot;,\&quot;);&lt;br&gt;&amp;nbsp; Serial.println(normalizedValue, 3);&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; // \u{24310}\u{36831}\u{20197}\u{25511}\u{21046}\u{25968}\u{25454}\u{21457}\u{36865}\u{39057}\u{29575}&lt;br&gt;&amp;nbsp; delay(50); // 20Hz\u{26356}\u{26032}\u{39057}\u{29575}&lt;br&gt;}&lt;/p&gt;\n&lt;p&gt;&lt;br&gt;```&lt;/p&gt;&quot;}}}]"><div><div style="white-space: pre;">```cpp</div></div></div></body></html>
files: 0 files
items: 2 items
item: string (text/plain)
```cpp
item: string (text/html)
<meta charset='utf-8'><html><head></head><body><div data-mind-map="[{&quot;type&quot;:5,&quot;data&quot;:{&quot;id&quot;:&quot;&quot;,&quot;title&quot;:{&quot;children&quot;:[{&quot;type&quot;:&quot;paragraph&quot;,&quot;children&quot;:[{&quot;type&quot;:&quot;text&quot;,&quot;text&quot;:&quot;```cpp&quot;}]}],&quot;type&quot;:&quot;document&quot;},&quot;collapse&quot;:false,&quot;labels&quot;:[{&quot;id&quot;:&quot;qq-mind-map-code-block-label&quot;,&quot;text&quot;:&quot;code-block&quot;,&quot;backgroundColor&quot;:&quot;rgb(172, 226, 197)&quot;,&quot;color&quot;:&quot;#000000&quot;}],&quot;notes&quot;:{&quot;content&quot;:&quot;&lt;p&gt;```cpp&lt;br&gt;// Arduino\u{36229}\u{22768}\u{27874}\u{20256}\u{24863}\u{22120}\u{20195}\u{30721}&lt;br&gt;// \u{29992}\u{20110}\u{19982}TouchDesigner\u{36890}\u{20449}&lt;/p&gt;\n&lt;p&gt;&lt;br&gt;const int trigPin = 2; &amp;nbsp; &amp;nbsp;// \u{35302}\u{21457}\u{24341}\u{33050}&lt;br&gt;const int echoPin = 3; &amp;nbsp; &amp;nbsp;// \u{22238}\u{22768}\u{24341}\u{33050}&lt;/p&gt;\n&lt;p&gt;&lt;br&gt;long duration;&lt;br&gt;int distance;&lt;br&gt;int smoothDistance;&lt;br&gt;int lastDistance = 0;&lt;/p&gt;\n&lt;p&gt;&lt;br&gt;void setup() {&lt;br&gt;&amp;nbsp; // \u{21021}\u{22987}\u{21270}\u{20018}\u{21475}\u{36890}\u{20449}&lt;br&gt;&amp;nbsp; Serial.begin(9600);&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; // \u{35774}\u{32622}\u{24341}\u{33050}\u{27169}\u{24335}&lt;br&gt;&amp;nbsp; pinMode(trigPin, OUTPUT);&lt;br&gt;&amp;nbsp; pinMode(echoPin, INPUT);&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; Serial.println(\&quot;Arduino Ultrasonic Sensor Ready\&quot;);&lt;br&gt;}&lt;/p&gt;\n&lt;p&gt;&lt;br&gt;void loop() {&lt;br&gt;&amp;nbsp; // \u{28165}\u{38500}\u{35302}\u{21457}\u{24341}\u{33050}&lt;br&gt;&amp;nbsp; digitalWrite(trigPin, LOW);&lt;br&gt;&amp;nbsp; delayMicroseconds(2);&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; // \u{21457}\u{36865}10\u{24494}\u{31186}\u{30340}\u{39640}\u{30005}\u{24179}\u{33033}\u{20914}&lt;br&gt;&amp;nbsp; digitalWrite(trigPin, HIGH);&lt;br&gt;&amp;nbsp; delayMicroseconds(10);&lt;br&gt;&amp;nbsp; digitalWrite(trigPin, LOW);&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; // \u{35835}\u{21462}\u{22238}\u{22768}\u{24341}\u{33050}\u{30340}\u{33033}\u{20914}\u{25345}\u{32493}\u{26102}\u{38388}&lt;br&gt;&amp;nbsp; duration = pulseIn(echoPin, HIGH);&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; // \u{35745}\u{31639}\u{36317}\u{31163}\u{65288}\u{21400}\u{31859}\u{65289}&lt;br&gt;&amp;nbsp; distance = duration * 0.034 / 2;&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; // \u{31616}\u{21333}\u{30340}\u{24179}\u{28369}\u{28388}\u{27874}&lt;br&gt;&amp;nbsp; smoothDistance = (distance + lastDistance) / 2;&lt;br&gt;&amp;nbsp; lastDistance = smoothDistance;&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; // \u{38480}\u{21046}\u{36317}\u{31163}\u{33539}\u{22260}\u{65288}0-200cm\u{65289}&lt;br&gt;&amp;nbsp; if (smoothDistance &amp;gt; 200) {&lt;br&gt;&amp;nbsp;smoothDistance = 200;&lt;br&gt;&amp;nbsp; }&lt;br&gt;&amp;nbsp; if (smoothDistance &amp;lt; 0) {&lt;br&gt;&amp;nbsp;smoothDistance = 0;&lt;br&gt;&amp;nbsp; }&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; // \u{21457}\u{36865}\u{25968}\u{25454}\u{21040}TouchDesigner&lt;br&gt;&amp;nbsp; // \u{26684}\u{24335}\u{65306}distance,normalized_value&lt;br&gt;&amp;nbsp; float normalizedValue = smoothDistance / 200.0; // \u{24402}\u{19968}\u{21270}\u{21040}0-1&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; Serial.print(smoothDistance);&lt;br&gt;&amp;nbsp; Serial.print(\&quot;,\&quot;);&lt;br&gt;&amp;nbsp; Serial.println(normalizedValue, 3);&lt;br&gt;&amp;nbsp;&amp;nbsp;&lt;br&gt;&amp;nbsp; // \u{24310}\u{36831}\u{20197}\u{25511}\u{21046}\u{25968}\u{25454}\u{21457}\u{36865}\u{39057}\u{29575}&lt;br&gt;&amp;nbsp; delay(50); // 20Hz\u{26356}\u{26032}\u{39057}\u{29575}&lt;br&gt;}&lt;/p&gt;\n&lt;p&gt;&lt;br&gt;```&lt;/p&gt;&quot;}}}]"><div><div style="white-space: pre;">```cpp</div></div></div></body></html>