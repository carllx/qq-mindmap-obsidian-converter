# ğŸ”„ TampermonkeyåŒæ­¥æŒ‡å—

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨è®¾ç½®Tampermonkeyè‡ªåŠ¨åŒæ­¥æ‚¨çš„ `node build.js --deploy` éƒ¨ç½²ç»“æœã€‚

## ğŸ“± å¿«é€Ÿè®¾ç½®

### æ­¥éª¤1: å®‰è£…è„šæœ¬
åœ¨æµè§ˆå™¨ä¸­è®¿é—®ä»¥ä¸‹URLï¼š
```
https://gist.githubusercontent.com/carllx/481c282bd808552229e305ce50c1d832/raw/QQmindmap2Obsidian.user.js
```

Tampermonkeyä¼šè‡ªåŠ¨è¯†åˆ«å¹¶æç¤ºå®‰è£…ã€‚

### æ­¥éª¤2: é…ç½®è‡ªåŠ¨æ›´æ–°
1. æ‰“å¼€Tampermonkey Dashboard
2. æ‰¾åˆ° "QQ Mind Map to Obsidian Converter" è„šæœ¬
3. ç‚¹å‡»è„šæœ¬åç§°è¿›å…¥ç¼–è¾‘é¡µé¢
4. ç‚¹å‡» "è®¾ç½®" æ ‡ç­¾
5. åœ¨ "æ›´æ–°" éƒ¨åˆ†ï¼š
   - è®¾ç½® "æ£€æŸ¥é—´éš”" ä¸º "å¤©" (æ¯å¤©æ£€æŸ¥ä¸€æ¬¡)
   - æˆ–è®¾ç½®ä¸º "è¯·æ±‚æ—¶" (æ¯æ¬¡æ‰“å¼€ç›¸å…³é¡µé¢æ£€æŸ¥)

## ğŸš€ å¼€å‘å·¥ä½œæµ

### å®Œæ•´æµç¨‹
```bash
# 1. ä¿®æ”¹ä»£ç åéƒ¨ç½²
npm run deploy

# 2. éªŒè¯éƒ¨ç½²çŠ¶æ€
npm run verify

# 3. æˆ–è€…ä¸€é”®æ‰§è¡Œä¸Šè¿°ä¸¤æ­¥
npm run dev
```

### ä¼ ç»Ÿå‘½ä»¤
```bash
# ä»…æ„å»º
node build.js

# æ„å»ºå¹¶éƒ¨ç½²
node build.js --deploy

# éªŒè¯æ›´æ–°çŠ¶æ€
node verify-update.js
```

## ğŸ”§ Tampermonkeyæ“ä½œ

### æ‰‹åŠ¨æ£€æŸ¥æ›´æ–°
1. **æ–¹æ³•ä¸€**: Dashboardæ“ä½œ
   - æ‰“å¼€Tampermonkey Dashboard
   - æ‰¾åˆ°æ‚¨çš„è„šæœ¬è¡Œ
   - ç‚¹å‡» "æœ€åæ›´æ–°" åˆ—çš„æ—¥æœŸ
   - é€‰æ‹© "æ£€æŸ¥æ›´æ–°"

2. **æ–¹æ³•äºŒ**: è„šæœ¬ç¼–è¾‘é¡µé¢
   - è¿›å…¥è„šæœ¬ç¼–è¾‘é¡µé¢
   - ç‚¹å‡»é¡¶éƒ¨çš„ "æ£€æŸ¥æ›´æ–°" æŒ‰é’®

### è‡ªåŠ¨æ›´æ–°è®¾ç½®è¯¦è§£

#### æ£€æŸ¥é—´éš”é€‰é¡¹:
- **ä»ä¸**: ç¦ç”¨è‡ªåŠ¨æ›´æ–°æ£€æŸ¥
- **å¤©**: æ¯å¤©æ£€æŸ¥ä¸€æ¬¡ï¼ˆæ¨èï¼‰
- **å°æ—¶**: æ¯å°æ—¶æ£€æŸ¥ä¸€æ¬¡
- **è¯·æ±‚æ—¶**: æ¯æ¬¡è®¿é—®åŒ¹é…ç½‘ç«™æ—¶æ£€æŸ¥

#### æ›´æ–°æ¨¡å¼:
- **æ£€æŸ¥**: å‘ç°æ›´æ–°æ—¶æç¤ºç”¨æˆ·
- **æ£€æŸ¥å¹¶å®‰è£…**: è‡ªåŠ¨å®‰è£…æ›´æ–°

## ğŸ“Š ç‰ˆæœ¬ç®¡ç†æœºåˆ¶

### ç‰ˆæœ¬å·æ ¼å¼
```
2.0.YYYYMMDD.HHMMSS
```
ä¾‹å¦‚: `2.0.20250808.095155`

### è‡ªåŠ¨æ›´æ–°åŸç†
1. **Tampermonkeyæ£€æŸ¥**: å®šæœŸè®¿é—® `@updateURL` è·å–æœ€æ–°ç‰ˆæœ¬å·
2. **ç‰ˆæœ¬æ¯”è¾ƒ**: æ¯”è¾ƒæœ¬åœ°å’Œè¿œç¨‹ç‰ˆæœ¬å·
3. **æç¤ºæ›´æ–°**: å‘ç°æ–°ç‰ˆæœ¬æ—¶æç¤ºç”¨æˆ·
4. **è‡ªåŠ¨å®‰è£…**: ä» `@downloadURL` ä¸‹è½½æ–°ç‰ˆæœ¬

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ›´æ–°æ£€æŸ¥å¤±è´¥
**ç—‡çŠ¶**: æç¤º"æ£€æŸ¥æ›´æ–°å¤±è´¥"
**è§£å†³**:
```bash
# éªŒè¯çº¿ä¸Šç‰ˆæœ¬æ˜¯å¦å¯è®¿é—®
curl -I "https://gist.githubusercontent.com/carllx/481c282bd808552229e305ce50c1d832/raw/QQmindmap2Obsidian.user.js"

# é‡æ–°éƒ¨ç½²
npm run deploy
```

#### 2. ç‰ˆæœ¬å·ä¸åŒ¹é…
**ç—‡çŠ¶**: æ˜¾ç¤ºç‰ˆæœ¬ä¸ä¸€è‡´
**è§£å†³**:
```bash
# æ£€æŸ¥ç‰ˆæœ¬çŠ¶æ€
npm run verify

# å¦‚æœéœ€è¦ï¼Œé‡æ–°éƒ¨ç½²
npm run deploy
```

#### 3. è‡ªåŠ¨æ›´æ–°ä¸å·¥ä½œ
**æ£€æŸ¥é¡¹**:
- [ ] ç¡®è®¤è„šæœ¬åŒ…å«æ­£ç¡®çš„ `@updateURL` å’Œ `@downloadURL`
- [ ] ç¡®è®¤Tampermonkeyè‡ªåŠ¨æ›´æ–°è®¾ç½®å·²å¯ç”¨
- [ ] ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸
- [ ] ç¡®è®¤GitHub Gistå¯è®¿é—®

### è°ƒè¯•å‘½ä»¤
```bash
# æ£€æŸ¥è„šæœ¬å…ƒæ•°æ®
grep -E "@(version|updateURL|downloadURL)" QQmindmap2Obsidian.user.js

# æµ‹è¯•çº¿ä¸Šè®¿é—®
curl -s "https://gist.githubusercontent.com/carllx/481c282bd808552229e305ce50c1d832/raw/QQmindmap2Obsidian.user.js" | head -10

# å®Œæ•´éªŒè¯
npm run verify
```

## ğŸ“‹ æœ€ä½³å®è·µ

### å¼€å‘å»ºè®®
1. **æ¯æ¬¡ä¿®æ”¹åéªŒè¯**: ä½¿ç”¨ `npm run verify` ç¡®è®¤éƒ¨ç½²æˆåŠŸ
2. **ç‰ˆæœ¬æ§åˆ¶**: Gitæäº¤å‰ç¡®ä¿çº¿ä¸Šç‰ˆæœ¬å·²æ›´æ–°
3. **æµ‹è¯•æµç¨‹**: åœ¨æµ‹è¯•ç¯å¢ƒå…ˆéªŒè¯è„šæœ¬åŠŸèƒ½

### ç”¨æˆ·ä½“éªŒ
1. **åˆç†çš„æ›´æ–°é¢‘ç‡**: ä¸è¦è¿‡äºé¢‘ç¹åœ°å‘å¸ƒæ›´æ–°
2. **ç‰ˆæœ¬è¯´æ˜**: åœ¨commit messageä¸­è®°å½•ä¸»è¦å˜æ›´
3. **å‘åå…¼å®¹**: å°½é‡ä¿æŒAPIå’ŒåŠŸèƒ½çš„å‘åå…¼å®¹æ€§

## ğŸ¯ é«˜çº§é…ç½®

### è‡ªå®šä¹‰æ›´æ–°é—´éš”
å¯ä»¥é€šè¿‡ä¿®æ”¹ `@updateURL` æ·»åŠ å‚æ•°æ¥æ§åˆ¶ç¼“å­˜ï¼š
```javascript
// @updateURL https://your-url/script.js?v=timestamp
```

### å¤šç¯å¢ƒéƒ¨ç½²
```bash
# å¼€å‘ç¯å¢ƒ
GIST_ID=dev_gist_id npm run deploy

# ç”Ÿäº§ç¯å¢ƒ  
GIST_ID=prod_gist_id npm run deploy
```

## ğŸ“ æ”¯æŒ

å¦‚æœé‡åˆ°åŒæ­¥é—®é¢˜ï¼š
1. é¦–å…ˆè¿è¡Œ `npm run verify` è¯Šæ–­
2. æ£€æŸ¥GitHub Tokenæƒé™
3. ç¡®è®¤ç½‘ç»œå’Œé˜²ç«å¢™è®¾ç½®
4. æŸ¥çœ‹Tampermonkeyæ§åˆ¶å°é”™è¯¯ä¿¡æ¯

---

**è®°ä½**: æ¯æ¬¡è¿è¡Œ `npm run deploy` åï¼ŒTampermonkeyç”¨æˆ·ä¼šåœ¨ä¸‹æ¬¡æ£€æŸ¥æ›´æ–°æ—¶è‡ªåŠ¨è·å–æœ€æ–°ç‰ˆæœ¬ï¼ğŸš€
